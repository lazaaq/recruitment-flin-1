<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>FLIN - Loan Assistance</title>
    <style>
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        }

        body {
        font-family: Arial, sans-serif;
        background-color: #fff;
        color: #4c7dbf !important;
        font-family: 'Roboto', sans-serif!important;
        }

        .section {
        padding: 60px 20px;
        text-align: center;
        }

        .box {
        background-color: #60A4EF;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        border-radius: 8px;
        height: 150px;
        margin: 20px auto;
        width: 80%;
        }

        .header {
        background-color: #4C7DBF;
        padding: 40px 20px;
        }

        .header h1 {
        font-size: 36px;
        color: #444;
        }

        #cta-button {
        margin-top: 20px;
        padding: 10px 20px;
        background: white;
        border: none;
        color: #60A4EF;
        box-shadow: 0 0 5px rgba(0,0,0,0.2);
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        }

        .footer {
        background-color: #ddd;
        padding: 20px;
        text-align: center;
        color: #555;
        }
        /* Chatbot Styles */
        #chatbotWidget {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 400px;
        height: 500px;
        border: 1px solid #ccc;
        background: white;
        display: none;
        flex-direction: column;
        font-family: Arial, sans-serif;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        z-index: 1000;
        }

        #chatLog {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
        }

        #questionButtons {
        padding: 10px;
        border-top: 1px solid #ccc;
        display: flex;
        flex-direction: column;
        gap: 5px;
        }

        .question-btn {
        padding: 8px;
        border: none;
        background: #60A4EF;
        color: white;
        cursor: pointer;
        border-radius: 4px;
        font-size: 14px;
        }

        .question-btn:hover {
        background: #0056b3;
        }

        #toggleChatBtn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: #0056b3;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        z-index: 1001;
        }

        #closeBtn {
        text-align: right;
        }

        #closeBtn button {
        border: none;
        background: transparent;
        font-size: 18px;
        cursor: pointer;
        color: #888;
        }

        #closeBtn button:hover {
        color: #333;
        }

        #titlechat {
            border-bottom: 1px solid #ccc;
            padding: 5px 10px;
            background-color: #4c7dbf;
            color: white;
        }
        #questionButtons.hidden {
            display: none;
        }
    </style>
  <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
</head>
<body>
    <!-- Wireframe Look -->
    <div class="header d-flex">
        <div>    
            <h1 style="color: white;"><b>FLIN - Your Financial Friend</b></h1>
            <h6><span style="color: white;">Hidup bebas utang, raih masa depan cemerlang</span></h6>   
        </div>
        <div class="ms-auto">
            <button onclick="toggleChat()" id="cta-button">Chatbot</button>
        </div>
    </div>
    
      <div class="section">
        <h2>About Us</h2>
        <div class="box"></div>
      </div>
    
      <div class="section">
        <h2>Our Services</h2>
        <div class="box"></div>
        <div class="box"></div>
        <div class="box"></div>
      </div>
    
      <div class="footer">
        <p>&copy; 2025 FLIN. All rights reserved.</p>
    </div>

    <!-- Chatbot -->
    <div id="chatbotWidget">
        <div class="d-flex" id="titlechat">
            <div class="text-center py-1">
                Chatbot
            </div>
            <div id="closeBtn" class="ms-auto">
                <button onclick="toggleChat()" style="color: white;">Ã—</button>
            </div>
        </div>
        <div id="chatLog"></div>
        <div>
            <div style="text-align: right; padding: 5px 10px;">
                <button onclick="toggleQuestionButtons()" id="toggleQuestionBtn" style="background: none; border: none; font-size: 18px; cursor: pointer;">â–¼</button>
            </div>
            <div id="questionButtons"></div>
        </div>
    </div>

    <button id="toggleChatBtn" onclick="toggleChat()">ðŸ’¬</button>

    <script>
        async function loadQuestions() {
            const res = await fetch('http://localhost:3000/api/questions');
            const data = await res.json();

            const container = document.getElementById('questionButtons');
            data.questions.forEach(q => {
                const btn = document.createElement('button');
                btn.innerText = q;
                btn.className = 'question-btn';
                btn.onclick = () => sendMessage(q);
                container.appendChild(btn);
            });
        }

        loadQuestions(); // Call this on page load

        async function sendMessage(message) {
            appendMessage('You', message);

            const res = await fetch('/api/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message })
            });

            const data = await res.json();
            appendMessage('Bot', data.reply);
        }

        function appendMessage(sender, text) {
            const chatLog = document.getElementById('chatLog');
            const msg = document.createElement('div');
            msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
            chatLog.appendChild(msg);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function toggleChat() {
            const widget = document.getElementById('chatbotWidget');
            widget.style.display = widget.style.display === 'none' || widget.style.display === '' ? 'flex' : 'none';
        }

        function toggleQuestionButtons() {
            const btns = document.getElementById('questionButtons');
            const icon = document.getElementById('toggleQuestionBtn');

            if (btns.classList.contains('hidden')) {
                btns.classList.remove('hidden');
                icon.textContent = 'â–¼'; // Panah bawah
            } else {
                btns.classList.add('hidden');
                icon.textContent = 'â–²'; // Panah atas
            }
        }

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>

</body>
</html>